services:
  my-app-undertow:
    build: demovt/.
    container_name: spring-undertow
    ports:
      - "8090:8080"
    restart: unless-stopped
    deploy:
      resources:
        limits:
          cpus: "1"      # máximo 1.0 CPUs
          memory: 1g       # máximo 1GB RAM
  my-app-webflux:
    build: demo/.
    container_name: spring-webflux
    ports:
      - "8091:8080"
    restart: unless-stopped
    deploy:
      resources:
        limits:
          cpus: "1"      # máximo 1.0 CPUs
          memory: 1g       # máximo 1GB RAM
  my-app-fastapi:
    build: fastapi_benck/.
    container_name: fastapi
    ports:
      - "8002:8000"
    restart: unless-stopped
    deploy:
      resources:
        limits:
          cpus: "1"      # máximo 1.0 CPUs
          memory: 1g       # máximo 1GB RAM
  my-app-python-puro:
    build:
      context: fastapi_benck
      dockerfile: Dockerfile_puro
    container_name: python-puro
    ports:
      - "8001:8000"
    restart: unless-stopped
    deploy:
      resources:
        limits:
          cpus: "1"      # máximo 1.0 CPUs
          memory: 1g       # máximo 1GB RAM
  node-fastify:
    build: fastify/.
    container_name: node-fastify
    environment:
      PORT: 3000
      REDIS_HOST: redis
      REDIS_PORT: 6379
      REDIS_PASSWORD: redis1234
      MONGO_URL: mongodb://mongodb:27017/cotador
    ports:
      - "3000:3000"
    restart: unless-stopped
    deploy:
      resources:
        limits:
          cpus: "1"      # máximo 1.0 CPUs
          memory: 1g       # máximo 1GB RAM          